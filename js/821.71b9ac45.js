"use strict";(self["webpackChunkforum1231"]=self["webpackChunkforum1231"]||[]).push([[821],{3821:function(t,s,e){e.r(s),e.d(s,{default:function(){return m}});var r=function(){var t=this,s=t._self._c;return s("div",{staticClass:"container py-5"},[s("NavTabs"),s("h1",{staticClass:"mt-5"},[t._v("美食達人")]),s("hr"),s("div",{staticClass:"row text-center"},t._l(t.users,(function(t){return s("UsersCardVue",{key:t.id,attrs:{initialuser:t}})})),1)],1)},o=[],a=e(2451),n=function(){var t=this,s=t._self._c;return s("div",{staticClass:"col-3"},[s("router-link",{attrs:{to:{name:"user",params:{id:t.user.id}}}},[s("img",{attrs:{src:t.user.image,width:"140px",height:"140px"}})]),s("h2",[t._v(t._s(t.user.name))]),s("span",{staticClass:"badge badge-secondary"},[t._v("追蹤人數："+t._s(t.user.FollowerCount))]),s("p",{staticClass:"mt-3"},[t.user.isFollowed?s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(s){return t.deletdFollowed(t.user.id)}}},[t._v(" 取消追蹤 ")]):s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(s){return t.addFollowed(t.user.id)}}},[t._v(" 追蹤 ")])])],1)},l=[],i=e(8390),u=e(6163),c={name:"UserCard",props:{initialuser:{type:Object,require:!0}},data(){return{user:this.initialuser}},methods:{async addFollowed(t){try{const s=await i.Z.addFollowing({userId:t});if("success"!==s.data.status)throw new Error(s.data.message);console.log(this.user.FollowerCount),this.user={...this.user,isFollowed:!0,FollowerCount:this.user.FollowerCount+1}}catch(s){u.F.fire({icon:"error",title:"無法執行"})}},async deletdFollowed(t){try{const s=await i.Z.deleteFollowing({userId:t});if(console.log(s),"success"!==s.data.status)throw new Error(s.data.message);console.log(this.user.FollowerCount),this.user={...this.user,isFollowed:!1,FollowerCount:this.user.FollowerCount-1}}catch(s){u.F.fire({icon:"error",title:"無法執行"})}}}},d=c,h=e(1001),w=(0,h.Z)(d,n,l,!1,null,null,null),f=w.exports,C={components:{NavTabs:a.Z,UsersCardVue:f},data(){return{users:[]}},methods:{async fetchUsers(){try{const t=await i.Z.getTopUsers();this.users=t.data.users}catch(t){u.F.fire({icon:"error",title:"無法取得美食達人"})}}},created(){this.fetchUsers()}},p=C,F=(0,h.Z)(p,r,o,!1,null,null,null),m=F.exports}}]);
//# sourceMappingURL=821.71b9ac45.js.map